<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const rolSelect = document.getElementById("tipo");
        const sucursalDiv = document.getElementById("selectorSucursal");

        rolSelect.addEventListener("change", function () {
            if (rolSelect.value === "empleado") {
                sucursalDiv.style.display = "block";
                document.getElementById("sucursalId").setAttribute("required", "required");
            } else {
                sucursalDiv.style.display = "none";
                document.getElementById("sucursalId").removeAttribute("required");
            }
        });

    });
</script>


<body>
    <div class="container d-flex justify-content-center align-items-center min-vh-100">
        <div class="col-md-6 mx-auto">
            <div class="card shadow p-4">
                <h2 class="text-center mb-4">Registrar Usuario</h2>

                <form action="/formularios/guardar" method="post">
                    <!-- Nombre -->
                    <div class="mb-3">
                        <label for="nombre" class="form-label">Nombre:</label>
                        <input type="text" id="nombre" name="nombre" class="form-control" required>
                    </div>

                    <!-- Apellido -->
                    <div class="mb-3">
                        <label for="apellido" class="form-label">Apellido:</label>
                        <input type="text" id="apellido" name="apellido" class="form-control" required>
                    </div>

                    <!-- DNI -->
                    <div class="mb-3">
                        <label for="dni" class="form-label">DNI:</label>
                        <input type="text" id="dni" name="dni" class="form-control" required>
                    </div>

                    <!-- Fecha de Nacimiento -->
                    <div class="mb-3">
                        <label for="fechaNacimiento" class="form-label">Fecha de Nacimiento:</label>
                        <input type="date" id="fechaNacimiento" name="fechaNacimiento" class="form-control" required>
                    </div>

                    <!-- Selección de rol -->
                    <div class="mb-3">
                        <label for="tipo" class="form-label">Selecciona tu rol:</label>
                        <select name="tipo" id="tipo" class="form-select">
                            <option value="cliente">Cliente</option>
                            <option value="empleado">Empleado</option>
                        </select>
                    </div>

                    <!-- Selector de sucursal para empleados -->
                    <div class="mb-3" id="selectorSucursal" style="display: none;">
                        <label for="sucursalId" class="form-label">Sucursal:</label>
                        <select id="sucursalId" name="sucursal" class="form-select">
                            <option value="">-- Selecciona una sucursal --</option>
                            <option th:each="sucursal : ${sucursales}" th:value="${sucursal.idSucursal}"
                                th:text="${sucursal.nombre}"></option>
                        </select>
                    </div>


                    <!-- Botón de envío -->
                    <div class="d-grid">
                        <button type="submit" class="btn btn-primary">Registrarse</button>
                    </div>

                </form>
                <!-- Mensaje de éxito -->
                <div th:if="${mensaje}" class="alert alert-success mt-3 text-center">
                    <span th:text="${mensaje}"></span>
                </div>

            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>